package kr.or.bit.controller;

<<<<<<< HEAD
import org.apache.ibatis.session.SqlSession;
import org.springframework.beans.factory.annotation.Autowired;
=======
import java.sql.Date;
import java.util.List;

import org.apache.ibatis.session.SqlSession;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.ui.Model;
>>>>>>> 73e3f5a228cbefc719b94ec2d035cc8bc1e1073a
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;

<<<<<<< HEAD
import kr.or.bit.dao.MessageDao;
import kr.or.bit.model.Message;
=======
import kr.or.bit.dao.CourseDao;
import kr.or.bit.model.Classroom;
import kr.or.bit.model.Course;
>>>>>>> 73e3f5a228cbefc719b94ec2d035cc8bc1e1073a
import kr.or.bit.service.NewsService;

@RestController
@RequestMapping("/ajax")
public class AjaxController {
<<<<<<< HEAD
  
  @Autowired
  private SqlSession sqlsession;
  
  @PostMapping("/news")
  public String getNews() {
    NewsService service = new NewsService();
    String news = service.getNews();
    
    return news;
  }
  
  @PostMapping("/message")
  public Message getMessage(int id) {
    System.out.println("여기탔냐?");
    MessageDao messageDao = sqlsession.getMapper(MessageDao.class);
    Message selectone = messageDao.selectOneMessage(id);
    return selectone;
  }
=======

	@Autowired
	private SqlSession sqlSession;

	@PostMapping("/news")
	public String getNews(Model model) {
		NewsService service = new NewsService();
		String news = service.getNews();

		return news;
	}

	@PostMapping("/classroom")
	public List<Classroom> getClassroom(Date start_date, @RequestParam(defaultValue = "1970-01-01") Date end_date) {
		CourseDao courseDao = sqlSession.getMapper(CourseDao.class);
		List<Classroom> classroomList = courseDao.selectAvailableClassroom(start_date, end_date);
		for (Classroom cr : classroomList) {
			System.out.println(cr.getId() + "/" + cr.getClassroom_name());
		}
		return classroomList;
	}
>>>>>>> 73e3f5a228cbefc719b94ec2d035cc8bc1e1073a
}
