<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- /*
*
* @date: 2019. 06. 24.
*
* @author: 권예지
* 
*/ -->
<mapper namespace="kr.or.bit.dao.CourseDao">
  <select id="selectAllCourse" resultType="kr.or.bit.model.Course">     
    SELECT c.id as id, course_name, start_date, end_date, c.subject as subject, c.classroom_id as classroom_id, r.classroom_name as classroom_name, s.subject as subject_name
    FROM Course as c 
    LEFT JOIN Classroom as r 
    ON c.classroom_id = r.classroom_name
    LEFT JOIN Subject as s 
    ON c.subject = s.subject;
  </select> 
<<<<<<< HEAD
  <select id="selectCourse" resultType="kr.or.bit.model.Course">     
	SELECT c.id as id, course_name, start_date, end_date, c.subject as subject, c.classroom_id as classroom_id, r.classroom_name as classroom_name, s.subject as subject
	FROM Course as c 
	LEFT JOIN Classroom as r 
	ON c.classroom_id = r.classroom_name
	LEFT JOIN Subject as s 
	ON c.subject = s.subject 
	WHERE c.id = #{id}
  </select> 
  <select id="selectRecentCourse" resultType="kr.or.bit.model.Course">
    SELECT c.id, course_name, start_date, end_date, c.subject, classroom_id, classroom_name, s.subject as subject_name
    FROM course c
    LEFT JOIN Classroom r 
    ON c.classroom_id = r.classroom_name
    LEFT JOIN Subject s 
    ON c.subject = s.subject
    WHERE c.id = (SELECT MAX(id)
                  FROM course)
  </select>
  <insert id="insertCourse">
 	INSERT INTO course(course_name, start_date, end_date, subject, classroom_id)
 	VALUES (#{course_name}, #{start_date}, #{end_date}, #{subject}, #{classroom_id})
  </insert>
  <delete id="deleteCourse">
    DELETE FROM course 
    WHERE id=#{id}
  </delete>
  <update id="updateCourse" parameterType="kr.or.bit.model.Course">
    UPDATE course
    SET course_name=#{course_name},
    start_date=#{start_date},
    end_date=#{end_date},
    subject=#{subject},
    classroom_id=#{classroom_id}
    WHERE id=#{id}
  </update>
</mapper>
  