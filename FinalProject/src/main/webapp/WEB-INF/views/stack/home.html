<!DOCTYPE html>
<html
  xmlns:th="http://www.thymeleaf.org"
  th:replace="fragments/layout :: layout(~{:: main}, ~{:: script}, ~{:: link})"
>
  <head>
    <!-- 이 페이지에서만 별도로 사용하는 CSS가 있다면 여기다 link 태그로 삽입 -->
    <link rel="stylesheet" th:href="@{/css/stack/home.css}" />
  </head>
  <body>
    <!-- 이 페이지의 내용은 main 클래스 div 태그 안에 작성 -->
    <div class="main" th:fragment="main">
      <div class="title">
        <h3>
          <b>스택게시판</b>
        </h3>
      </div>
      <hr />
      <!-- 검색창 -->
      <table>
        <tr>
          <td class="seath">
          <form method="get">
            <select size="1" style="height: 30px;"  name="criteria">
            <option value="titleOrContent" selected>제목 + 내용</option>
            <option value="title">제목</option>
            <option value="name">글작성자</option>
            </select>
            <input type="hidden" name="board_id">
            <input
              type="text"
              name="boardSearch"
              id="boardSearch"
              size="25"
              placeholder="검색내용을 적어주세요"
            />
            <input type="submit" class="btn btn-primary" value="검색">
            <!-- <img th:src="@{/css/stack/search.png}" class="seaimg" /> -->
            </form>
          </td>
        </tr>
      </table>
      <!-- 스택글목록 -->
      <table class="iteration" th:each="list : ${stacklist}">
        <tbody>
          <tr
            th:onclick="'window.location.href = \'' + @{/stack/content(id=${list.id})} + '\''"
          >
            <td class="td1">
              <span class="tdst">
                <span th:text="${list.votenum}"></span>
                <br />
              </span>
              <span class="td2">추천</span><br />
              <span class="tdst">
                <span th:text="${list.commentlist.size()}"></span>
                <br />
              </span>
              <span class="td2">답변</span>
            </td>
            <td colspan="2">
              <p class="tdtitle"><span th:text="${list.title}"></span></p>
              <div class="tdcontent">
                <th:block th:utext="${list.content}" />
              </div>
            </td>
          </tr>
          <tr>
            <td class="td2"><span th:text="${list.view_count}"></span>view</td>
            <td class="td3">
              <span class="tag-name iteration" th:each="tag : ${list.tags}">
                <span th:style="'background-color:'+@{${tag.color}}+';'">[[${tag.tag}]]</span>
              </span>
            </td>
            <td class="td4"><span th:text="${list.writer.name}"></span></td>
          </tr>
          <tr>
            <td colspan="3">
              <hr />
            </td>
          </tr>
        </tbody>
      </table>
     <!-- 페이지 버튼 -->
     <div class="row">
      <div class="page-btns">
        <span th:if="${pager.prev}">
          <a class="btn btn-primary paging" th:href="@{/myclass/homework(page=${pager.startPage}-1)}">&laquo;</a>
        </span>
        <span th:each="idx, iterStat : ${#numbers.sequence(pager.startPage,pager.endPage)}" >
          <a th:if="${boardSearch} != null" class="btn btn-primary paging" th:href="@{/stack(page=${idx},boardSearch=${boardSearch})}" th:classappend="${pager.currentPage} == ${idx} ? active" th:text="${idx}"></a>
          <a th:if="${boardSearch} == null" class="btn btn-primary paging" th:href="@{/stack(page=${idx})}" th:classappend="${pager.currentPage} == ${idx} ? active" th:text="${idx}"></a>          
        </span>
        <span th:if="${pager.next} and ${pager.endPage > 0}">
          <a class="btn btn-primary paging" th:href="@{/myclass/homework(page=${pager.endPage}+1)}">&raquo;</a>
        </span>
      </div>

      <div class="write-btns">
        <a th:href="@{/stack/write}" class="btn btn-primary">글쓰기</a>
      </div>
    </div>
    </div>
    <!-- 이 페이지에서 사용하는 자바스크립트는 이 script 태그 안에 작성 -->
    <script th:inline="javascript"></script>
    <script src="/js/stack/write.js"></script>
  </body>
</html>
